<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Home</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="author" content="" />
  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">
	<!-- <link href='https://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700italic,900,700,900italic' rel='stylesheet' type='text/css'> -->

	<!-- Stylesheets -->
	<!-- Dropdown Menu -->
	<link rel="stylesheet" href="/html/hotel/css/superfish.css">
	<!-- Owl Slider -->
	<!-- <link rel="stylesheet" href="/html/experiment/css/owl.carousel.css"> -->
	<!-- <link rel="stylesheet" href="/html/experiment/css/owl.theme.default.min.css"> -->
	<!-- Date Picker -->
	<link rel="stylesheet" href="/html/hotel/css/bootstrap-datepicker.min.css">
	<!-- CS Select -->
	<link rel="stylesheet" href="/html/hotel/css/cs-select.css">
	<link rel="stylesheet" href="/html/hotel/css/cs-skin-border.css">

	<!-- Themify Icons -->
	<link rel="stylesheet" href="/html/hotel/css/themify-icons.css">
	<!-- Flat Icon -->
	<link rel="stylesheet" href="/html/hotel/css/flaticon.css">
	<!-- Icomoon -->
	<link rel="stylesheet" href="/html/hotel/css/icomoon.css">
	<!-- Flexslider  -->
	<link rel="stylesheet" href="/html/hotel/css/flexslider.css">
	
	<!-- Style -->
	<link rel="stylesheet" href="/html/hotel/css/style.css">

		<link rel="stylesheet" href="/html/hotel/css/style.default.css" type="text/css" />
	<!-- Modernizr JS -->
	<script src="/html/hotel/js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="/html/experiment/js/respond.min.js"></script>
	<![endif]-->

</head>
<body>
	<div id="fh5co-wrapper">
	<div id="fh5co-page">
	<div id="fh5co-header">
		<header id="fh5co-header-section">
			<div class="container">
				<div class="nav-header">
					<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
					<h1 id="loginout" style="display: none"><a>注销账号</a></h1>
					<nav id="fh5co-menu-wrap" role="navigation">
						<ul class="sf-menu" id="fh5co-primary-menu">
							<li><a class="active" href="/hotel/index">主页</a></li>
							<li>
								<a class="fh5co-sub-ddown">选择酒店</a>
								<ul class="fh5co-sub-menu">
								</ul>
							</li>
							<li><a href="/user/userInfo">会员信息</a></li>
							<li><a href="/user/contact">关于我们</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</header>
		
	</div>
	<!-- end:fh5co-header -->
	<aside id="fh5co-hero" class="js-fullheight">
		<div class="flexslider js-fullheight">
			<ul class="slides" id="hothotel">
				<!--<li style="background-image: url(images/slider1.jpg);">-->
					<!--<div class="overlay-gradient"></div>-->
					<!--<div class="container">-->
						<!--<div class="col-md-12 col-md-offset-0 text-center slider-text">-->
							<!--<div class="slider-text-inner js-fullheight">-->
								<!--<div class="desc">-->
									<!--<p><span>Bora Hotel</span></p>-->
									<!--<h2>Reserve Room for Family Vacation</h2>-->
									<!--<p>-->
										<!--<a href="#" class="btn btn-primary btn-lg">Book Now</a>-->
									<!--</p>-->
								<!--</div>-->
							<!--</div>-->
						<!--</div>-->
					<!--</div>-->
				<!--</li>-->
		  	</ul>
	  	</div>
	</aside>
	<div class="wrap">
		<div class="container">
			<div class="row">
				<div id="availability">

						<div class="a-col">
							<section>
								<select id="selecthotel" class="cs-select cs-skin-border">
									<option value="0" disabled selected>选择酒店</option>
									<option value="email">清迈皇后酒店</option>
									<option value="twitter">上海浦东丽思卡尔顿酒店</option>
									<option value="linkedin">新加坡思佳丽精品酒店</option>
								</select>
							</section>
						</div>
					<!--<div class="a-col">-->
						<!--<section>-->
							<!--<select id="selectroom" class="cs-select cs-skin-border">-->
								<!--<option value="0" disabled selected>选择房间</option>-->
							<!--</select>-->
						<!--</section>-->
					<!--</div>-->
						<div class="a-col alternate">
							<div class="input-field">
								<label for="date-start">预定入住时间</label>
								<input type="text" class="form-control" id="date-start" />
							</div>
						</div>
						<div class="a-col alternate">
							<div class="input-field">
								<label for="date-end">预计退房时间</label>
								<input type="text" class="form-control" id="date-end" />
							</div>
						</div>
						<div class="a-col action">
							<a id="reseve" >
								<span>预定酒店</span>
							</a>
						</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id="fh5co-counter-section" class="fh5co-counters">
		<div class="container">
			<div class="row">
				<div class="col-md-3 text-center">
					<span id="d1" class="fh5co-counter js-counter" data-from="0" data-to="50" data-speed="50" data-refresh-interval="1"></span>
					<span class="fh5co-counter-label">入住房间数</span>
				</div>
				<div class="col-md-3 text-center">
					<span id="d2" class="fh5co-counter js-counter" data-from="0" data-to="40" data-speed="50" data-refresh-interval="1"></span>
					<span class="fh5co-counter-label">总房间数</span>
				</div>
				<div class="col-md-3 text-center">
					<span id="d3" class="fh5co-counter js-counter" data-from="0" data-to="60" data-speed="50" data-refresh-interval="1"></span>
					<span class="fh5co-counter-label">酒店数</span>
				</div>
				<div class="col-md-3 text-center">
					<span id="d4" class="fh5co-counter js-counter" data-from="0" data-to="30" data-speed="50" data-refresh-interval="1"></span>
					<span class="fh5co-counter-label">人数</span>
				</div>
			</div>
		</div>
	</div>

	<div id="featured-hotel" class="fh5co-bg-color">
		<div class="container">
			
			<div class="row">
				<div class="col-md-12">
					<div class="section-title text-center">
						<h2>热门房间</h2>
					</div>
				</div>
			</div>

			<div class="row" id="hotroom">

			</div>

		</div>
	</div>

	<footer id="footer" class="fh5co-bg-color">
		<div class="container">
			<div class="row">
				<div class="col-md-3">
					<div class="copyright">
						<p><small>Copyright &copy; 2016.Company name All rights reserved.</small></p>
					</div>
				</div>
				<div class="col-md-6">
					<div class="row">
						<div class="col-md-3">
							<h3>公司信息</h3>
							<ul class="link">
								<li><a href="#">关于我们</a></li>
								<li><a href="#">酒店</a></li>
								<li><a href="#">热门房间</a></li>
								<li><a href="#">联系我们</a></li>
							</ul>
						</div>
						<!--<div class="col-md-6">-->
							<!--<h3>Subscribe</h3>-->
							<!--<p>Sed cursus ut nibh in semper. Mauris varius et magna in fermentum. </p>-->
							<!--<form action="#" id="form-subscribe">-->
								<!--<div class="form-field">-->
									<!--<input type="email" placeholder="Email Address" id="email">-->
									<!--<input type="submit" id="submit" value="Send">-->
								<!--</div>-->
							<!--</form>-->
						<!--</div>-->
					</div>
				</div>
			</div>
		</div>
	</footer>

	</div>
	<!-- END fh5co-page -->
		<div id="loginbox" class="loginbox">
			<div class="loginboxinner">

				<div class="logo">
					<h1 class="logo">酒店<span>管理系统 </span></h1>
					<span class="slogan">登录后可预定酒店</span>
				</div><!--logo-->
				<div class="nousername" style="display: none">
					<div class="loginmsg">密码不正确.</div>
				</div><!--nousername-->
				<div class="username">
					<div class="usernameinner">
						<input type="text" value="" name="username" placeholder="输入登录名" id="loginname" />
					</div>
				</div>
				<div class="password">
					<div class="passwordinner">
						<input type="password"value=""  name="password" placeholder="输入密码" id="password" />
					</div>
				</div>
				<div name="registdata" class="password" style="display: none">
					<div class="passwordinner">
						<input type="password"value=""  name="password" placeholder="重复密码" id="prepassword" />
					</div>
				</div>
				<div name="registdata" class="username" style="display: none">
					<div class="usernameinner">
						<input type="text" name="username" placeholder="输入简称" id="username" />
					</div>
				</div>
				<div name="registdata" class="username" style="display: none">
				<div class="usernameinner">
					<input type="text" name="username" placeholder="输入手机号码" id="userphone" />
				</div>
			</div>
				<div name="logindata"><button id="login">登录</button></div>
				<div name="registdata" style="display: none"><button id="regist">注册</button></div>
				<div name="logindata" class="keep" id="toregist"><a>我要注册</a> </div>
				<div name="registdata" class="keep" id="tologin" style="display: none"><a> 我有账号</a></div>

			</div><!--loginboxinner-->
		</div><!--loginbox-->

			<div id="close">关闭弹框</div>
		<div id="cover"></div>
	</div>
	<!-- END fh5co-wrapper -->
	
	<!-- Javascripts -->
	<script src="/html/hotel/js/jquery-2.1.4.min.js"></script>
	<!-- Dropdown Menu -->
	<!--<script src="/html/experiment/js/hoverIntent.js"></script>-->
	<!--<script src="/html/experiment/js/superfish.js"></script>-->
	<script src="/html/hotel/js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="/html/hotel/js/jquery.waypoints.min.js"></script>
	<!-- Counters -->
	<script src="/html/hotel/js/jquery.countTo.js"></script>
	<!-- Stellar Parallax -->
	<script src="/html/hotel/js/jquery.stellar.min.js"></script>
	<!-- Owl Slider -->
	<!-- // <script src="/html/experiment/js/owl.carousel.min.js"></script> -->
	<!-- Date Picker -->
	<script src="/html/hotel/js/bootstrap-datepicker.min.js"></script>
	<!-- CS Select -->
	<script src="/html/hotel/js/classie.js"></script>
	<!-- Flexslider -->

<script>
    if(localStorage["islogin"]&&localStorage["islogin"]!="") {
        userinfo=JSON.parse(localStorage["userid"]);
        $("#loginout").show();
    }
	$("#toregist").click(function () {
		$("div[name='registdata']").show();
		$("div[name='logindata']").hide();
    });
    $("#tologin").click(function () {
        $("div[name='registdata']").hide();
        $("div[name='logindata']").show();
    });
    $("#loginout").click(function () {
		localStorage["islogin"]="";
		$("#loginout").hide();
    })
    $("#regist").click(function () {
        if($("#loginname").val()==""){
            alert("登录不能为空");return;
		}
        if($("#password").val()==""){
            alert("密码不能为空");return;
        }
        if($("#password").val()!=$("#prepassword").val()){
            alert("两次输入密码不一致");return;
        }
        $.ajax({url:"/user/regist",data:{loginname:$("#loginname").val(),loginpwd:$("#password").val(),username:$("#username").val(),userphone:$("#userphone").val()},success:function(result){
                if(result&&result.code==1) {
                    alert("恭喜您注册成功");
                    $("div[name='registdata']").hide();
                    $("div[name='logindata']").show();
                }else{
                    alert("注册失败"+result.msg);
                }
            }});
    })
	$("#reseve").bind("click",function (event) {
	    if($("#selecthotel option:selected").val()=="0"){
	        alert("主选择酒店")
	        return
		}
		if($("#date-start").val()==""){
	        alert("请选择起始时间")
	        return;
		}
		if($("#date-end").val()==""){
            alert("请选择结束时间")
            return;
        }
        if(localStorage["islogin"]&&localStorage["islogin"]!="") {
            createorder(userinfo.id,$("#selecthotel option:selected").val(),$("#selecthotel option:selected").text(),"","",$("#date-start").val(),$("#date-end").val());
        }else{
            showlogin()
            $(".loginbox").show();
            $("#cover").show();
		}
    })
	function createorder(userid,hotelid,hotelname,roomid,roomname,starttime,endtime) {
	    $.ajax({url:"/order/addorder",data:{userid:userid, hotelid:hotelid,hotelname:hotelname,roomid:roomid,roomname:roomname,starttime:starttime,endtime:endtime},success:function(result){
            if(result&&result.code==1) {
                alert("预定成功")
                $(".loginbox").hide();
                $("#cover").hide();
            }else{
                alert("预定失败")
			}
        }});

    }
    var userinfo;
	$("#login").click(function () {
        $.ajax({url:"/user/login",data:{loginname:$("#loginname").val(),loginpwd:$("#password").val()},success:function(result){
                if(result&&result.code==1) {
                    localStorage["islogin"]="true"
                    $("#loginout").show();
                    localStorage["userid"]=JSON.stringify(result.data);
                    userinfo=result.data;
                    createorder(result.data.id,$("#selecthotel option:selected").val(),$("#selecthotel option:selected").text(),"","",$("#date-start").val(),$("#date-end").val());
                }else{
                    $(".nousername").show();
				}
            }});
    })
    $(".btn").bind("click",function (event) {
        showlogin()
        $(".loginbox").show();
        $("#cover").show();
    })
    $(window).resize(function() {
        showlogin()
    });
	function showlogin() {
        screenWidth = $(window).width();
        screenHeight = $(window).height();
        scrolltop = $(document).scrollTop();
        objLeft = (screenWidth - $(".loginbox").width()) / 2;
        objTop = (screenHeight - $(".loginbox").height()) / 2 + scrolltop;
        $(".loginbox").css({left: objLeft + 'px', top: objTop + 'px', 'display': 'block'});
    }
    $(window).scroll(function() {
        if($(".loginbox").css("display")!='none') {
            showlogin()
        }
    });
    $("#cover").click(function () {
		$(".loginbox").hide();
		$(this).hide();
    })
    $.ajax({url:"/hotel/getHotelList",success:function(result){
            $(".fh5co-sub-menu").empty();
            $("#hothotel").empty();
            $("#selecthotel").html("<option value='0' disabled selected>选择酒店</option>");
            if(result.data&&result.data.length>0){
                result.data.forEach(function (item,index) {
                    var html="<li><a href=\"/hotel/hotel?hotelid="+item.id+"\">"+item.hotelname+"</a></li>";
                    var op="<option value=\""+item.id+"\">"+item.hotelname+"</option>";
                    $(".fh5co-sub-menu").append(html);
                    $("#selecthotel").append(op);
                    if(item.ishot==1) {
                        gethothotel(item)
                    }
                });
                bindorderclick(1)
                // $("#selecthotel").bind("change",function () {
                //     var id=$("#selecthotel option:selected").val();
                //     $.ajax({url:"/experiment/getRoomListByHotelId",data:{hotelid:id},success:function(result){
                //             if(result&&result.data&&result.data.length>0) {
                //                 $("#selectroom").html("<option value='0' disabled selected>选择房间</option>");
                //                 result.data.forEach(function (item,index) {
                //                     bindroom(item);
                //                 });
                //             }
                //         }});
                // });
                var script=document.createElement("script");
                script.type="text/javascript";
                script.src="/html/hotel/js/selectFx.js";
                document.getElementsByTagName('head')[0].appendChild(script);
                script.onload=function () {
					[].slice.call( document.querySelectorAll( 'select.cs-select' ) ).forEach( function(el) {
						new SelectFx(el);
					} );

                }
                var script2=document.createElement("script");
                script2.type="text/javascript";
                script2.src="/html/hotel/js/jquery.flexslider-min.js";
                document.getElementsByTagName('head')[0].appendChild(script2);

                var script3=document.createElement("script");
                script3.type="text/javascript";
                script3.src="/html/hotel/js/custom.js";
                document.getElementsByTagName('head')[0].appendChild(script3);

            }
        }})
	function gethothotel(data) {
		var lihtml="<li style=\"background-image: url({img});\">\n" +
            "\t\t   \t\t<div class=\"overlay-gradient\"></div>\n" +
            "\t\t   \t\t<div class=\"container\">\n" +
            "\t\t   \t\t\t<div class=\"col-md-12 col-md-offset-0 text-center slider-text\">\n" +
            "\t\t   \t\t\t\t<div class=\"slider-text-inner js-fullheight\">\n" +
            "\t\t   \t\t\t\t\t<div class=\"desc\">\n" +
            "\t\t   \t\t\t\t\t\t<p><span>{hotelname}</span></p>\n" +
            "\t\t   \t\t\t\t\t\t<h2>{hotelnote}</h2>\n" +
            "\t\t\t   \t\t\t\t\t<p>\n" +
            "\t\t\t   \t\t\t\t\t\t<a class=\"btn btn-primary btn-lg\" val='{hotelid}' toname='{hotelname}' name='toorder'>预定</a>\n" +
            "\t\t\t   \t\t\t\t\t</p>\n" +
            "\t\t   \t\t\t\t\t</div>\n" +
            "\t\t   \t\t\t\t</div>\n" +
            "\t\t   \t\t\t</div>\n" +
            "\t\t   \t\t</div>\n" +
            "\t\t   \t</li>";
		lihtml=lihtml.replace("{img}",data.pic)
        lihtml=lihtml.replace("{hotelname}",data.hotelname)
        lihtml=lihtml.replace("{hotelname}",data.hotelname)
        lihtml=lihtml.replace("{hotelnote}",data.note)
        lihtml=lihtml.replace("{hotelid}",data.id)
		$("#hothotel").append(lihtml);
    }

    $.ajax({url:"/hotel/getHotRoom",success:function(result){
			if(result&&result.data&&result.data.length>0) {
			    $("#hotroom").empty();
			    result.data.forEach(function (item,index) {
                    gethotromm(item)
                })
                bindorderclick(2)
            }
		}});
    function gethotromm(data) {
        console.log(data)
        var divlist="<div class=\"feature-full-1col\">\n" +
            "\t\t\t\t\t<div class=\"image\" style=\"background-image: url({img});\">\n" +
            "\t\t\t\t\t\t<div class=\"descrip text-center\">\n" +
            "\t\t\t\t\t\t\t<p><small>折扣价</small><span>${price}/晚</span></p>\n" +
            "\t\t\t\t\t\t</div>\n" +
            "\t\t\t\t\t</div>\n" +
            "\t\t\t\t\t<div class=\"desc\">\n" +
            "\t\t\t\t\t\t<h3>{roomname}</h3>\n" +
            "\t\t\t\t\t\t<p>{note}</p>\n" +
            "\t\t\t\t\t\t<p><a name='toorder' class=\"btn btn-primary btn-luxe-primary\" val='{id}' toname='{roomname}' >我要预定<i class=\"ti-angle-right\"></i></a></p>\n" +
            "\t\t\t\t\t</div>\n" +
            "\t\t\t\t</div>";
        divlist = divlist.replace("{img}", data.pic)
        divlist = divlist.replace("{roomname}", data.roomname)
        divlist = divlist.replace("{roomname}", data.roomname)
        divlist = divlist.replace("{note}",data.note)
        divlist = divlist.replace("{price}",data.price)
        divlist = divlist.replace("{id}",data.id)
		$("#hotroom").append(divlist);
    }
    function bindorderclick(type) {
		$("a[name='toorder']").bind("click",function () {
            if(localStorage["islogin"]&&localStorage["islogin"]!="") {
                var id=$(this).attr("val");
                var toname=$(this).attr("toname");
                if(type==1){
                    createorder(userinfo.id,id,toname,0,"","","")
                }else{
                    createorder(userinfo.id,0,"",id,toname,"","")
				}
            }else{
                showlogin()
                $(".loginbox").show();
                $("#cover").show();
            }
        })
    }
    $.ajax({url:"/hotel/getCount",success:function(result){
            if(result&&result.data&&result.data.length>0) {
                result.data.forEach(function (item,index) {
                    switch (index){
						case 0:
						    $("#d1").attr("data-to",item)
						    break;
                        case 1:
                            $("#d2").attr("data-to",item)
                            break;
                        case 2:
                            $("#d3").attr("data-to",item)
                            break;
                        case 3:
                            $("#d4").attr("data-to",item)
                            break;
					}
                })
            }
        }});
</script>
	<!--<script src="/html/experiment/js/selectFx.js"></script>-->
	<!--<script src="/html/experiment/js/jquery.flexslider-min.js"></script>-->
	<!--<script src="/html/experiment/js/custom.js"></script>-->
</body>
</html>