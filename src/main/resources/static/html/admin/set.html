<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>实验台--启停设置</title>
<link rel="stylesheet" href="/html/admin/css/style.default.css" type="text/css" />
    <script src="/js/jquery-1.10.2.js"></script>
    <!--[if IE 9]>
    <link rel="stylesheet" media="screen" href="/html/admin/css/style.ie9.css"/>
<![endif]-->
<!--[if IE 8]>
    <link rel="stylesheet" media="screen" href="/html/admin/css/style.ie8.css"/>
<![endif]-->
<![endif]-->
</head>

<body class="withvernav">
<div class="bodywrapper">
    <div th:include="html/admin/inner :: copyheader ('set')"></div>

    <div class="centercontent">
    
        <!--<div class="pageheader">-->
            <!--<h1 class="pagetitle">实验管理</h1>-->
            <!--<span class="pagedesc">添加实验</span>-->

            <!--<ul class="hornav">-->
                <!--<li><a href="/admin/hotel">实验管理</a></li>-->
                <!--<li class="current"><a>添加实验</a></li>-->
            <!--</ul>-->
        <!--</div>&lt;!&ndash;pageheader&ndash;&gt;-->
        
        <div id="contentwrapper" class="contentwrapper">
        
        	<div id="updates" class="subcontent">
                    <div class="two_third dashboard_left">

                        <br clear="all" />
                    
                        <div class="contenttitle2 nomargintop">
                            <h3>实验设置</h3>
                        </div><!--contenttitle-->

                        <br clear="all" />
                        
                        <table cellpadding="0" cellspacing="0" border="0" class="stdtable overviewtable">
                            <colgroup>
                                <col class="con0" width="20%" />
                                <col class="con1" width="20%" />
                                <col class="con0" width="20%" />
                                <col class="con1" width="20%" />
                                <col class="con0" width="20%" />
                            </colgroup>
                            <thead>
                                <tr>
                                    <th class="head0">选择实验类型</th>
                                    <th class="head1">启停状态</th>
                                    <th class="head0">加分人数</th>
                                    <th class="head0">操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="center" id="d1"><select id="experiment"></select></td>
                                    <td id="d2"><span id="exstatus"></span></td>
                                    <td id="d3"><input type="text" value="10" id="txt" /> </td>
                                    <td id="d4"><a id="exdo"></a></td>
                                </tr>
                            </tbody>
                        </table>


                        
                    </div><!--two_third dashboard_left -->

            </div><!-- #updates -->

        </div><!--contentwrapper-->
        
        <br clear="all" />
        
	</div><!-- centercontent -->
    
    
</div><!--bodywrapper-->
<script type="text/javascript">
    $.ajax({url:"/admin/getOnlineModel",success:function(result){
            if(result&&result.data) {
                if(result.data.exMainEntities){
                    var idlist=new Array();
                    $(result.data.exMainEntities).each(function (index,item) {
                        if(!idlist.contains(item.main_type)){
                            $("#experiment").append("<option value='"+item.main_type+"'>"+item.title+"</option>");
                        }
                        idlist.push(item.main_type);
                    })
                }
                if(result.data.exOnlineEntity){
                    $("#exstatus").text(result.data.exOnlineEntity.ex_status==1?"启用":"停止");
                    $("#exdo").text(result.data.exOnlineEntity.ex_status==1?"结课":"开课");
                    $("#exdo").click(function (d) {
                        if($("#txt").val()==""){
                            alert("不能为空，且为数字")
                            return
                        }
                        if(confirm('确认：'+(result.data.exOnlineEntity.ex_status==1?"停止":"启用")+"？")) {
                            $.ajax({
                                url: "/admin/updateStatus",
                                data: {bonusNum: $("#txt").val(),status:result.data.exOnlineEntity.ex_status},
                                success: function (result) {
                                    location.href = location.href
                                }
                            })
                        }
                    })
                }
            }
        }});
    Array.prototype.contains = function ( needle ) {
        for (i in this) {
            if (this[i] == needle) return true;
        }
        return false;
    }
</script>
</body>
</html>
