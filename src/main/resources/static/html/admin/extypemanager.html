<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>实验台管理-实验类型管理</title>
    <link rel="stylesheet" href="/html/admin/css/style.default.css" type="text/css" />
    <script src="/js/jquery-1.10.2.js"></script>
    <link rel="stylesheet" media="screen" href="/html/admin/css/common.css"/>
</head>

<body class="withvernav">
<div class="bodywrapper">
    <div th:include="html/admin/inner :: copyheader ('extype')"></div>

    <div class="centercontent">

        <div class="pageheader">
            <h1 class="pagetitle">实验类型管理</h1>
            <span class="pagedesc">The content below are loaded using ajax</span>
            <ul class="hornav">
                <li class="current"><a>实验类型管理</a></li>
                <li><a id="add">添加实验类型</a></li>
            </ul>
        </div><!--pageheader-->

        <div id="contentwrapper" class="contentwrapper">

            <div id="inbox" class="subcontent">

                <div class="msghead">
                    <ul class="msghead_menu">
                        <li class="marginleft5"><a class="msgtrash" title="Trash"></a></li>
                        <li class="right"><a class="next"></a></li>
                        <li class="right"><a class="prev prev_disabled"></a></li>
                        <li class="right"><span class="pageinfo">1-10 of 2,139</span></li>
                    </ul>
                    <span class="clearall"></span>
                </div><!--msghead-->

                <table cellpadding="0" cellspacing="0" border="0" class="stdtable mailinbox">
                    <colgroup>
                        <col class="con0" width="4%" />
                        <col class="con1" width="14%"/>
                        <col class="con1" width="10%"/>
                    </colgroup>
                    <thead>
                    <tr>
                        <th class="head0">实验类型id</th>
                        <th class="head1">实验类型名称</th>
                        <th class="head0">操作</th>
                    </tr>
                    </thead>
                    <tfoot>
                    <tr>
                        <th class="head0">实验类型id</th>
                        <th class="head1">实验类型名称</th>
                        <th class="head0">操作</th>
                    </tr>
                    </tfoot>
                    <tbody id="userlist">
                    <tr th:each="extype,exStat : ${exExTypeEntities}" th:class="${exStat.odd}?'unread':''">
                        <th class="head0" th:text="${extype.id}"></th>
                        <th class="head1" th:text="${extype.experimentname}"></th>
                        <th class="head0"><a th:value='${extype.id}' th:title="${extype.experimentname}" t="update" class="btn btn4 btn_link"></a><a th:value="${extype.id}" t="del" class="btn btn4 btn_trash"></a></th>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div id="compose" class="subcontent" style="display: none">&nbsp;</div>
            <div id="dialogBg"></div>
            <div id="dialog" class="animated">
                <img class="dialogIco" width="50" height="50" src="/admin/images/ico.png" alt="" />
                <div class="dialogTop">
                    <a href="javascript:;" class="claseDialogBtn">关闭</a>
                </div>
                <ul class="editInfos">
                    <li><label><font color="#ff0000">* </font>实验类型名称：<input type="text" id="classname" class="ipt" /></label></li>
                    <li><input type="hidden" id="cid" value="0" /><input id="btnsave" type="button" value="确认提交" class="submitBtn" /></li>
                </ul>
            </div>
        </div><!--contentwrapper-->

    </div><!--centercontent-->
    
</div><!--bodywrapper-->
<script type="text/javascript">
    $(function () {
        $("#add").click(function () {
            $("#cid").val(0);
            $("#classname").val("");
            $("#dialog").show();
            $("#compose").show();
        })
        $(".claseDialogBtn").click(function () {
            $("#dialog").hide();
            $("#compose").hide();
        })
        $("#btnsave").click(function () {
            if($("#classname").val()==""){
                alert("类型名称不能为空");
                return;
            }
            $.ajax({url:"/admin/updateextype",contentType: 'application/json;charset=utf-8',data:{id:$("#cid").val(),experimentname:$("#classname").val()},success:function(result){
                    if(result&&result.code==1) {
                        alert("操作成功")
                        location.href=location.href
                    }else{
                        alert("操作失败")
                    }
                }});
        })
        $("a[t='del']").click(function () {
            if(confirm("确定删除？")) {
                var id = $(this).attr("value")
                $.ajax({
                    url: "/admin/delextype", data: {id: id}, success: function (result) {
                        if (result && result.code == 1) {
                            alert("删除成功");
                            location.href = location.href;
                        } else {
                            alert("删除失败")
                        }
                    }
                });
            }
        })
        $("a[t='update']").click(function () {
            var id = $(this).attr("value")
            var value=$(this).attr("title")
            $("#cid").val(id);
            $("#classname").val(value);
            $("#dialog").show();
            $("#compose").show();
        })
    })
</script>
</body>
</html>
